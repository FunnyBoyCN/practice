(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a7aa756"],{5278:function(e,t,n){"use strict";n("6b54");var a=n("d225"),s=n("b0b4"),o=function(){function e(t){Object(a["a"])(this,e),this._num=t}return Object(s["a"])(e,[{key:"shieldPhone",value:function(){return this._num.toString().substring(0,3)+"****"+this._num.toString().substring(7,11)}},{key:"shieldCodeNum",value:function(){return this._num.toString().substring(0,4)+"**** **** **** *"}},{key:"timeTrans",value:function(e){var t=new Date(e),n=t.getFullYear()<10?"0".concat(t.getFullYear()):t.getFullYear(),a=t.getMonth()+1<10?"0".concat(t.getMonth()):t.getMonth(),s=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),o=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),r=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes(),i=t.getSeconds()<10?"0".concat(t.getSeconds()):t.getSeconds();return"".concat(n,"-").concat(a,"-").concat(s," ").concat(o,":").concat(r,":").concat(i)}}]),e}();t["a"]=o},6938:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("navbar",{attrs:{navbarTitle:"会员码"}}),n("div",{staticClass:"memberCodeView",style:{height:e.height}},[n("div",{staticClass:"mainView"},[n("div",{staticClass:"memberGrade"},[n("span",[e._v(e._s(e.memberGrade.grade)+"：")]),n("span",[e._v(e._s(e.phoneShow(e.memberGrade.phone)))])]),n("div",{staticClass:"memberAssets"},e._l(e.memberAssets,function(t,a){return n("div",{key:a,staticClass:"item"},[n("span",{staticClass:"content"},[e._v(e._s(t.content))]),n("span",{staticClass:"text"},[e._v(e._s(t.text))])])}),0),n("div",{staticClass:"memberCode"},[n("div",{staticClass:"codeNumber"},[n("span",[e._v(e._s(e.showNumber))]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.openCode,expression:"!openCode"}],staticClass:"seeNumber",on:{click:function(t){t.stopPropagation(),e.openCode=!0}}},[e._v("查看数字")])]),n("div",{staticClass:"barCode"},[n("svg",{attrs:{id:"barcode"}})]),n("div",{staticClass:"tip"},[n("van-icon",{attrs:{name:"replay",size:"14px",color:"#a7a7a7"}}),n("span",[e._v("会员码每30秒自动更新，请在店内消费时使用")])],1)])])])],1)},s=[],o=n("9d8d"),r=n("62c5"),i=n.n(r),c=n("5278"),u=n("7c15"),d=n("bc3a"),l=n.n(d),m={components:{navbar:o["a"]},data:function(){return{height:0,memberGrade:{phone:18689772300,grade:"普卡会员"},memberAssets:[{text:"积分",content:0},{text:"优惠卷",content:0},{text:"钱包·充值",content:0}],openCode:!1,codeNumber:"",showNumber:"",timer:"",account:0}},computed:{phoneShow:function(){return function(e){var t=new c["a"](e);return t.shieldPhone()}}},mounted:function(){var e=this;this.height=document.documentElement.clientHeight-46+"px",this.init(),this.timer=setInterval(function(){e.getMemberCode()},3e4)},beforeDestroy:function(){clearInterval(this.timer)},methods:{init:function(){var e=this,t=u["a"].get("/memberCode"),n=u["a"].get("/accounts"),a=u["a"].get("/integral");l.a.all([t,n,a]).then(l.a.spread(function(t,n,a){e.codeNumber=t.result;var s=new c["a"](t.result);e.showNumber=s.shieldCodeNum(),i()("#barcode").options({font:"OCR-B"}).CODE128(t.result,{textMargin:0,height:120,displayValue:!1}).render(),e.$set(e.memberAssets[2],"content",n.result.balance),e.$set(e.memberAssets[0],"content",a.result.integral)}))},getMemberCode:function(){var e=this;u["a"].get("/memberCode",{params:{noLoading:!0}}).then(function(t){e.codeNumber=t.result,e.openCode=!1;var n=new c["a"](t.result);e.showNumber=n.shieldCodeNum(),i()("#barcode").options({font:"OCR-B"}).CODE128(t.result,{textMargin:0,height:120,displayValue:!1}).render()})}},watch:{openCode:function(){if(this.openCode)this.showNumber=this.codeNumber;else{var e=new e(this.codeNumber);this.codeNumber=e.shieldCodeNum()}}}},h=m,b=(n("a2bf"),n("2877")),g=Object(b["a"])(h,a,s,!1,null,"9366a79c",null);t["default"]=g.exports},a2bf:function(e,t,n){"use strict";var a=n("f4c0"),s=n.n(a);s.a},b0b4:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("85f2"),s=n.n(a);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),s()(e,a.key,a)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}},d225:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a})},f4c0:function(e,t,n){}}]);
//# sourceMappingURL=chunk-0a7aa756.8ec41cce.js.map