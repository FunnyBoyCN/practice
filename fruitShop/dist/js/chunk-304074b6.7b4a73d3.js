(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-304074b6"],{"02d2":function(t,e,a){},"2f1f":function(t,e,a){},"5a3a":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.collageOrder,function(e){return a("div",{staticClass:"item marginTop paddingLR flex column",on:{click:function(a){return t.toDetail(e._id)}}},[a("div",{staticClass:"top paddingTB flex alignCenter spaceBetween border"},[a("div",{staticClass:"mode flex row justCenter alignCenter"},[a("span",[t._v(t._s(e.mode)+"人团")])]),a("div",{staticClass:"state"},[t._v(t._s(t.orderState(e.state)))])]),a("collage-content",{attrs:{collage:t.contentCollage(e),isDetail:!1}}),a("div",{directives:[{name:"show",rawName:"v-show",value:-1!=e.state,expression:"item.state!=-1"}],staticClass:"collageShop paddingTB border"},[t._v("\n            提货门店："+t._s(e.pickupShop.name)+"\n        ")]),a("div",{staticClass:"state paddingTB"},[a("div",{staticClass:"text"},[a("div",{directives:[{name:"show",rawName:"v-show",value:-1==e.state,expression:"item.state==-1"}],staticClass:"item cancel"},[t._v("\n                    取消时间："+t._s(e.cancelTime)+"\n                ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.state,expression:"item.state==0"}],staticClass:"item time"},[t._v("\n                    付款剩余时间："),a("count-time",{attrs:{stopTime:t.stopTime(e.createdTime)},on:{stop:t.stop}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.state,expression:"item.state==1"}],staticClass:"item time"},[t._v("\n                    分享好友拼团吧\n                    "),a("van-icon",{staticClass:"icon",attrs:{name:"arrow"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.state&&e.open,expression:"item.state==2&&item.open"}],staticClass:"item time"},[t._v("\n                    提货码："+t._s(e.pickUpNum)+"\n                ")])]),a("button",{staticClass:"button",on:{click:function(a){a.stopPropagation(),t.stateControl(e.state).method(e)}}},[t._v(t._s(t.stateControl(e.state).text))])]),a("transition",{attrs:{enterActiveClass:"fadeIn",leaveActiveClass:"fadeOut"}},[a("other-collage",{directives:[{name:"show",rawName:"v-show",value:e.other,expression:"item.other"}],staticClass:"others animated faster",attrs:{order:!0}})],1)],1)}),t.payMode?a("payMode",{attrs:{totalPrice:t.totalPrice,payId:t.payId,isCollageCheckout:!0},on:{payModeShow:t.Show}}):t._e(),a("share",{ref:"share",attrs:{isCollage:!0,order:!0},on:{openTabbar:t.openTabbar}}),t.noResult?a("no-data",{attrs:{text:"拼团"}}):t._e()],2)},n=[],i=(a("7f7f"),a("96cf"),a("3b8d")),s=(a("a481"),a("c5f6"),a("ac6a"),a("c92c")),r=a("5fb0"),c=a("ba0f"),u=a("8156"),l=a("0de2"),h=a("ca19"),d=a("44bf"),p=a("d399"),m=(a("2f62"),a("2b0e")),f=a("7c15"),v=a("a247");m["a"].use(d["a"]).use(p["a"]);var b={inject:["reload"],data:function(){return{collageOrder:[],stateDemo:[{state:-1,buttonGroups:{text:"重新购买",method:this.buyAgain}},{state:0,buttonGroups:{text:"立即付款",method:this.pay}},{state:1,buttonGroups:{text:"邀请好友",method:this.invite}},{state:2,buttonGroups:{text:"提货码",method:this.pickUp}},{state:3,buttonGroups:{text:"参与其他",method:this.others}}],totalPrice:0,payId:"",share:!1,timeLimitString:"",payMode:!1,noResult:!1}},computed:{orderState:function(){return function(t){var e="";switch(t){case-1:e="已取消";break;case 0:e="待付款";break;case 1:e="已付款";break;case 2:e="已成团";break;case 3:e="已提货";break}return e}},stateControl:function(){return function(t){var e={};return this.stateDemo.forEach(function(a){a.state==t&&(e=a.buttonGroups)}),e}},stopTime:function(){return function(t){var e,a=Date.now(),o=a-t;return e=o<9e5?1e3*Math.round((9e5-o)/1e3):0,e}},contentCollage:function(){return function(t){return t.price=Number(t.price).toFixed(2),t}}},components:{collageContent:s["a"],share:h["a"],payMode:c["a"],countTime:r["a"],otherCollage:u["a"],noData:l["a"]},methods:{Show:function(t){this.payMode=t},toDetail:function(t){this.$store.dispatch("pay/ChangePayPrice",this.totalPrice),this.$store.dispatch("pay/ChangePayId",t),this.$router.push({path:"/Orders/collageOrder/detail",query:{id:t}})},buyAgain:function(t){this.$router.push({path:"/Collage/checkout",query:{id:t.parentID}})},pay:function(t){var e=this;f["a"].get("/payPassword").then(function(a){e.totalPrice=Number(t.price),e.payId=t._id,e.payMode=!0}).catch(function(t){Dialog.alert({title:"您还未设置支付密码",message:"立即去设置",confirmButtonText:"现在",confirmButtonColor:"#19a251",cancelButtonText:"稍候",showCancelButton:!0}).then(function(){e.$router.push({path:"/editPayPassword"})}).catch(function(){return!1})})},stop:function(t){var e=this;if(t)var a=setTimeout(function(){e.reload(),e.$router.replace({path:"/Orders",query:{orderMode:"collageOrder"}}),clearTimeout(a)},500)},openTabbar:function(t){this.$store.dispatch("tabbar/changeHidden",t)},invite:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get("/getCollageOrder",{params:{id:e._id}});case 2:a=t.sent,this.timeLimitString=Object(v["a"])(a.timeLimit),this.shareData(a),this.share=!0,this.$refs.share.openShare=!0,this.$store.dispatch("tabbar/changeHidden",!0);case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),pickUp:function(t){t.open?this.$set(t,"open",!1):this.$set(t,"open",!0)},others:function(t){var e=this;t.other?this.$set(t,"other",!1):(this.collageOrder.forEach(function(t){e.$set(t,"other",!1)}),this.$set(t,"other",!0))},shareData:function(t){var e={mainImageUrl:"",qrCodeText:"",nameAndDesc:"",spec:"",timeLimit:"",mode:"",realPrice:"",price:""};e.mainImageUrl=t.goods.goodsImg[0],e.qrCodeText="http://192.168.3.2:8080/#/Collage/checkout?id=".concat(t.parentID,"&&createdId=").concat(t.createdId),e.nameAndDesc=t.goods.name+t.goods.desc,e.spec=t.goods.spec,e.realPrice=t.price,e.price=t.goods.realPrice,e.mode=t.mode,e.timeLimit=this.timeLimitString,this.$store.dispatch("share/CreatedShare",e)}},created:function(){var t=this;f["a"].get("/getCollageOrder").then(function(e){t.collageOrder=e,0==e.length&&(t.noResult=!0)})}},g=b,y=(a("7114"),a("2877")),w=Object(y["a"])(g,o,n,!1,null,"4979f2b6",null);e["default"]=w.exports},"5fb0":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"countTimeView"},[a("span",[t._v(t._s(t.countTime))])])},n=[],i=(a("c5f6"),a("d225")),s=a("b0b4"),r=function(){function t(e){Object(i["a"])(this,t),this.time=e,this.timeTransform=this.timeTransform.bind(this)}return Object(s["a"])(t,[{key:"dateTransform",value:function(t){if(0==t)return"00:00";var e=this.timeTransform(new Date(t).getMinutes()),a=this.timeTransform(new Date(t).getSeconds());return"".concat(e,":").concat(a)}},{key:"timeTransform",value:function(t){return t<10?"0".concat(t):"".concat(t)}}]),t}(),c=new r,u={data:function(){return{countTime:"00:00:00",timer:"",myStopTime:0}},props:{stopTime:{type:Number,default:0},isDetail:{type:Boolean,default:!1}},methods:{openCountTime:function(t){var e=this;this.countTime=c.dateTransform(t),0!==t?this.timer=setInterval(function(){t-=1e3,e.countTime=e.isDetail?c.dateTransform(t):"00:".concat(c.dateTransform(t)),0==t&&(e.$emit("stop",!0),clearInterval(e.timer))},1e3):this.countTime=""}},mounted:function(){this.openCountTime(this.stopTime)},watch:{stopTime:function(t,e){t!==e&&this.openCountTime(this.stopTime)}}},l=u,h=(a("f7a2"),a("2877")),d=Object(h["a"])(l,o,n,!1,null,"57584290",null);e["a"]=d.exports},7114:function(t,e,a){"use strict";var o=a("2f1f"),n=a.n(o);n.a},"7f4c":function(t,e,a){},"92ec":function(t,e,a){"use strict";var o=a("7f4c"),n=a.n(o);n.a},b0b4:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var o=a("85f2"),n=a.n(o);function i(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),n()(t,o.key,o)}}function s(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}},ba0f:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.payShow,expression:"!payShow"}],staticClass:"payMode",on:{touchmove:function(t){t.preventDefault()}}},[a("div",{staticClass:"close"},[a("span",{staticClass:"tip"},[t._v("请选择支付方式")]),a("van-icon",{staticClass:"crossIcon",attrs:{name:"cross",size:"18px"},on:{click:function(e){return t.$emit("payModeShow",!1)}}})],1),a("pay-mode",{attrs:{totalPrice:t.totalPrice}}),a("div",{staticClass:"payButton"},[a("button",{staticClass:"toPay",on:{click:function(e){return e.stopPropagation(),t.toPay()}}},[t._v("确认支付")])])],1),t.showPayMode?a("balance-pay",{attrs:{isOutPay:!0,isDetail:t.isDetail,isCollageCheckout:t.isCollageCheckout}}):t._e(),a("van-overlay",{attrs:{show:!t.payShow,"z-index":10}})],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=a("562c"),r=a("1aa9"),c=a("2f62");function u(t){for(var e=1;e<arguments.length;e++)if(e%2){var a=null!=arguments[e]?arguments[e]:{},o=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),o.forEach(function(e){Object(i["a"])(t,e,a[e])})}else Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[e]));return t}var l={components:{payMode:r["a"],balancePay:s["a"]},data:function(){return{payShow:!1}},methods:{toPay:function(){this.$store.dispatch("pay/ChangePayId",this.payId),this.$store.dispatch("pay/ChangePayPrice",this.totalPrice),this.$store.dispatch("pay/ChangePayShow",!0),this.payShow=!0},close:function(){this.$emit("payModeShow",!1)}},watch:{showPayMode:function(){this.showPayMode||this.$emit("payModeShow",!1)}},computed:u({},Object(c["b"])("pay",["showPayMode"])),props:["totalPrice","isDetail","payId","isCollageCheckout"]},h=l,d=(a("92ec"),a("2877")),p=Object(d["a"])(h,o,n,!1,null,"8df725c6",null);e["a"]=p.exports},f7a2:function(t,e,a){"use strict";var o=a("02d2"),n=a.n(o);n.a}}]);
//# sourceMappingURL=chunk-304074b6.7b4a73d3.js.map