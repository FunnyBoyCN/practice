(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac834b5e"],{"08d8":function(e,t,a){},"0de2":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"noDataView",style:{height:e.homeHeight+"px"}},[a("van-icon",{attrs:{name:"fail",size:"48px",color:"#7a7a7a"}}),e.isAddress?e._e():a("span",{staticClass:"warmingText"},[e._v("您还没有任何"+e._s(e.text)+"订单")]),e.isAddress?a("span",{staticClass:"warmingText"},[e._v("您还未设置任何收货地址")]):e._e()],1)},o=[],n=a("2b0e"),r=a("ad06");n["a"].use(r["a"]);var i={props:{text:{type:String},isAddress:{type:Boolean,default:!1}},data:function(){return{homeHeight:0}},mounted:function(){this.isAddress?this.homeHeight=document.documentElement.clientHeight-96:this.homeHeight=document.documentElement.clientHeight-140}},c=i,u=(a("553c"),a("2877")),l=Object(u["a"])(c,s,o,!1,null,"2a28a15b",null);t["a"]=l.exports},"1b8e":function(e,t,a){"use strict";var s=a("272d"),o=a.n(s);o.a},"272d":function(e,t,a){},"2ecf":function(e,t,a){},"39b2":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topMs flex row spaceBetween alignCenter"},[a("div",{staticClass:"time  border flex row alignCenter"},[a("van-icon",{attrs:{name:e.icon,size:"4vw",color:"#7a7a7a"}}),a("span",{staticClass:" marginFontLeft"},[e._v(e._s(e.orderTime))])],1),a("span",{staticClass:"state",class:e.stateClass(e.state)},[e._v(e._s(e.stateText(e.state)))])])},o=[],n=a("2b0e"),r=a("ad06");n["a"].use(r["a"]);var i={data:function(){return{}},props:["icon","state","orderTime"],computed:{stateText:function(){return function(e){var t;switch(e){case-1:t="订单已取消";break;case 0:t="订单未付款";break;case 1:t="订单已付款";break;case 2:t="订单送货中";break;case 3:t="订单已收货";break}return t}},stateClass:function(){return function(e){var t;switch(e){case-1:t="cancel";break;case 0:t="pending";break;case 1:t="done";break;case 2:t="done";break;case 3:t="done";break}return t}}}},c=i,u=(a("1b8e"),a("2877")),l=Object(u["a"])(c,s,o,!1,null,"838c6130",null);t["a"]=l.exports},"553c":function(e,t,a){"use strict";var s=a("08d8"),o=a.n(s);o.a},"562c":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-overlay",{attrs:{show:!0,"z-index":"11"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.fail,expression:"!fail"}],staticClass:"pay",class:e.showKeyboard?"payPopUp":"",on:{touchmove:function(e){e.preventDefault()}}},[a("div",{staticClass:"top border"},[a("van-icon",{staticClass:"closeIcon",attrs:{name:"cross",size:"16px"},on:{click:e.close}}),a("span",{staticClass:"tip"},[e._v(e._s(e.confirmPrice?"请输入密码":"请确认金额"))])],1),a("div",{staticClass:"payContent padding"},[a("div",{staticClass:"payGoods border"},[a("span",{staticClass:"name"},[e._l(e.merchandise,function(t){return[e._v("\n                  "+e._s(t.name)+"X"+e._s(t.num)+"\n               ")]})],2),a("span",{staticClass:"price"},[e._v("￥"+e._s(e.payPrice.toFixed(2)))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.confirmPrice,expression:"!confirmPrice"}],staticClass:"confirmPrice"},[a("button",{staticClass:"confirm",on:{click:function(t){e.confirmPrice=!0}}},[e._v("输入密码")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.confirmPrice,expression:"confirmPrice"}],staticClass:"payPassword animated",class:[e.success?"success":"",e.error?"error shake":""],on:{touchmove:function(e){e.preventDefault()}}},[a("van-password-input",{staticClass:"input",attrs:{value:e.value,focused:e.showKeyboard,info:e.error?"":e.info,"error-info":e.error?e.info:""},on:{focus:function(t){e.showKeyboard=!0}}})],1)])]),a("div",{on:{touchmove:function(e){e.preventDefault()}}},[a("van-number-keyboard",{attrs:{show:e.showKeyboard},on:{input:e.onInput,delete:e.onDelete,blur:function(t){e.showKeyboard=!1}}})],1)],1)},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("96cf"),a("3b8d")),i=(a("c5f6"),a("2b0e")),c=a("2f62"),u=a("6e47"),l=a("ad06"),d=a("c41f"),p=a("7bd9"),f=a("d399"),h=a("7c15");function m(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),s.forEach(function(t){Object(n["a"])(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}i["a"].use(u["a"]).use(l["a"]).use(d["a"]).use(p["a"]).use(f["a"]);var y={data:function(){return{showKeyboard:!1,value:"",confirmPrice:!1,info:"密码为 6 位数字",success:!1,error:!1,fail:!1}},inject:["reload"],beforeDestroy:function(){this.$store.dispatch("pay/Clear")},props:{isCollageCheckout:{type:Boolean,default:!1},isOutPay:{type:Boolean,default:!1},isDetail:{type:Boolean}},methods:{onInput:function(e){this.value=(this.value+e).slice(0,6)},onDelete:function(){this.value=this.value.slice(0,this.value.length-1)},close:function(){var e=this;Object(f["a"])({message:"支付失败",icon:"cross",duration:1100}),this.fail=!0;var t=setTimeout(function(){e.$store.dispatch("pay/ChangePayShow",!1),clearTimeout(t)},1200)}},watch:{value:function(){var e=this;if(6==this.value.length){var t=f["a"].loading({mask:!0,message:"支付中..."});switch(this.mode){case"weChatWallet":alert("微信支付接口");break;case"memberWallet":h["a"].post("/checkPayPassword",{password:Number(this.value),_slient:!0}).then(function(){var a=Object(r["a"])(regeneratorRuntime.mark(function a(s){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.success=!0,e.isCollageCheckout?h["a"].post("/createdCollageOrder",{id:e.payId,price:e.payPrice}).then(function(a){t.clear(),f["a"].success({message:a.message,duration:1e3});var s=setTimeout(function(){e.isOutPay?(e.reload(),e.$store.dispatch("pay/ChangePayShow",!1)):e.$router.push({path:"/Collage/checkout/paySuccess",query:{id:e.payId}}),clearTimeout(s)},1100)},function(a){t.clear(),Object(f["a"])({message:a.response.data.data.message,icon:"cross",duration:1e3}),e.$store.dispatch("pay/ChangePayShow",!1)}):h["a"].post("/createdOrder",{id:e.payId,price:e.payPrice}).then(function(a){t.clear(),f["a"].success({message:a.message,duration:1e3});var s=setTimeout(function(){e.isOutPay?(e.reload(),e.$store.dispatch("pay/ChangePayShow",!1)):(e.$store.dispatch("carts/clearCarts"),e.$store.dispatch("tabbar/changeTabbarName","/Orders/timelyOrder"),e.$router.push({path:"/Orders",query:{orderMode:"timelyOrder"}})),clearTimeout(s)},1100)},function(a){t.clear(),Object(f["a"])({message:a.response.data.data.message,icon:"cross",duration:1100}),e.$store.dispatch("pay/ChangePayShow",!1)});case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),function(a){t.clear(),e.error=!0,e.info=a.response.data.data.message});break}}else this.error=!1,this.success=!1,this.info="密码为 6 位数字"}},computed:m({},Object(c["b"])("carts",["merchandise","totalPrice","realTotalPrice"]),{},Object(c["b"])("payMode",["mode"]),{},Object(c["b"])("pay",["showPayMode","payId","payPrice"]))},v=y,b=(a("7d3d"),a("2877")),g=Object(b["a"])(v,s,o,!1,null,"09ec1c7a",null);t["a"]=g.exports},"580e":function(e,t,a){},"7d3d":function(e,t,a){"use strict";var s=a("2ecf"),o=a.n(s);o.a},"7f4c":function(e,t,a){},"92ec":function(e,t,a){"use strict";var s=a("7f4c"),o=a.n(s);o.a},ae86:function(e,t,a){"use strict";var s=a("580e"),o=a.n(s);o.a},ba0f:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.payShow,expression:"!payShow"}],staticClass:"payMode",on:{touchmove:function(e){e.preventDefault()}}},[a("div",{staticClass:"close"},[a("span",{staticClass:"tip"},[e._v("请选择支付方式")]),a("van-icon",{staticClass:"crossIcon",attrs:{name:"cross",size:"18px"},on:{click:function(t){return e.$emit("payModeShow",!1)}}})],1),a("pay-mode",{attrs:{totalPrice:e.totalPrice}}),a("div",{staticClass:"payButton"},[a("button",{staticClass:"toPay",on:{click:function(t){return t.stopPropagation(),e.toPay()}}},[e._v("确认支付")])])],1),e.showPayMode?a("balance-pay",{attrs:{isOutPay:!0,isDetail:e.isDetail,isCollageCheckout:e.isCollageCheckout}}):e._e(),a("van-overlay",{attrs:{show:!e.payShow,"z-index":10}})],1)},o=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("562c"),i=a("1aa9"),c=a("2f62");function u(e){for(var t=1;t<arguments.length;t++)if(t%2){var a=null!=arguments[t]?arguments[t]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),s.forEach(function(t){Object(n["a"])(e,t,a[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}var l={components:{payMode:i["a"],balancePay:r["a"]},data:function(){return{payShow:!1}},methods:{toPay:function(){this.$store.dispatch("pay/ChangePayId",this.payId),this.$store.dispatch("pay/ChangePayPrice",this.totalPrice),this.$store.dispatch("pay/ChangePayShow",!0),this.payShow=!0},close:function(){this.$emit("payModeShow",!1)}},watch:{showPayMode:function(){this.showPayMode||this.$emit("payModeShow",!1)}},computed:u({},Object(c["b"])("pay",["showPayMode"])),props:["totalPrice","isDetail","payId","isCollageCheckout"]},d=l,p=(a("92ec"),a("2877")),f=Object(p["a"])(d,s,o,!1,null,"8df725c6",null);t["a"]=f.exports},d57d:function(e,t,a){},e242:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"total paddingTB flex row flexEnd alignCenter border"},[a("span",[e._v("共 "+e._s(e.totalNum)+" 件商品 总价：")]),a("real-price",{attrs:{big:18,small:14,text:e.totalPrice,isEnd:!0,beforeSize:18}})],1)},o=[],n=a("eafd"),r={props:["totalNum","totalPrice"],components:{realPrice:n["a"]}},i=r,c=(a("fc02"),a("2877")),u=Object(c["a"])(i,s,o,!1,null,"adcb0a7e",null);t["a"]=u.exports},e6af:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.order,function(t){return a("div",{key:t._id,staticClass:"item marginTop",on:{click:function(a){return a.stopPropagation(),e.toDetail(t._id,t.totalPrice)}}},[a("order-top",{attrs:{state:t.state,icon:"notes-o",orderTime:t.createdTime}}),a("div",{staticClass:"goodsImg paddingTB border flex row "},[e._l(t.carts,function(e){return[a("van-image",{staticClass:"imageItem",attrs:{width:"65",height:"65",src:e.goodsImg,fit:"cover"}})]})],2),a("order-total",{attrs:{totalNum:t.totalNum,totalPrice:t.totalPrice.toString()}}),a("step",{staticClass:"state border",attrs:{state:t.state}}),0==t.state?a("div",{staticClass:"button flex row flexEnd"},[a("button",{staticClass:"cancel",on:{click:function(a){return a.stopPropagation(),e.cancelOrder(t._id)}}},[e._v("取消订单")]),a("button",{staticClass:"pay",on:{click:function(a){return a.stopPropagation(),e.payNow(t._id,t.totalPrice)}}},[e._v("立即付款")])]):e._e()],1)}),e.payMode?a("payMode",{attrs:{totalPrice:e.totalPrice,payId:e.payId},on:{payModeShow:e.Show}}):e._e(),e.noResult?a("no-data",{attrs:{text:"商品"}}):e._e()],2)},o=[],n=a("39b2"),r=a("e242"),i=a("b7da"),c=a("ba0f"),u=a("0de2"),l=a("7c15"),d=(a("2f62"),a("ad06")),p=a("44bf"),f=a("6e47"),h=a("2241"),m=a("2b0e");m["a"].use(d["a"]).use(p["a"]).use(f["a"]);var y={components:{step:i["a"],orderTop:n["a"],orderTotal:r["a"],payMode:c["a"],noData:u["a"]},data:function(){return{order:[],totalPrice:0,payId:"",payMode:!1,noResult:!1}},inject:["reload"],mounted:function(){var e=this;l["a"].get("/order").then(function(t){e.order=t,0==t.length&&(e.noResult=!0)})},methods:{toDetail:function(e,t){this.$store.dispatch("pay/ChangePayPrice",t),this.$store.dispatch("pay/ChangePayId",e),this.$router.push({path:"/Orders/timelyOrder/detail",query:{id:e}})},Show:function(e){this.payMode=e},cancelOrder:function(e){var t=this;h["a"].confirm({title:"订单取消",message:"是否取消"}).then(function(){l["a"].post("/cancelOrder",{id:e}).then(function(e){t.reload(),t.Notify({type:"success",message:e.message})},function(e){t.Notify({type:"danger",message:e.response.data.data.message})})}).catch(function(){return!1})},payNow:function(e,t){var a=this;l["a"].get("/payPassword").then(function(s){a.totalPrice=t,a.payId=e,a.payMode=!0}).catch(function(e){h["a"].alert({title:"您还未设置支付密码",message:"立即去设置",confirmButtonText:"现在",confirmButtonColor:"#19a251",cancelButtonText:"稍候",showCancelButton:!0}).then(function(){a.$router.push({path:"/editPayPassword"})}).catch(function(){return!1})})}}},v=y,b=(a("ae86"),a("2877")),g=Object(b["a"])(v,s,o,!1,null,"54e56596",null);t["default"]=g.exports},fc02:function(e,t,a){"use strict";var s=a("d57d"),o=a.n(s);o.a}}]);
//# sourceMappingURL=chunk-ac834b5e.53c0bf88.js.map